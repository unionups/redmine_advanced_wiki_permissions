<p class="delegate_label"><%= l(:label_permitted_principals) %>:</p>
<% if @dp.permitted.any? %>
  <table class="list permissions members" id="permissions">
    <thead>
      <tr>
        <th><%= l(:label_user) %> / <%= l(:label_group) %></th>
        <th style="width:15%"></th>
      </tr>
    </thead>
    <tbody>
      <% if @dp.permitted.any? %>
        <% @dp.permitted.each do |permitt| %>
          <% principal = Principal.find(permitt) %>
          <tr id="member-<%= principal.id %>" class="<%= cycle 'odd', 'even' %> member">
            <td class=<%= "#{principal.class.to_s.downcase}" %>><%= link_to_user principal %></td>
            <td class="buttons">
              <%= link_to_remote(l(:button_delete), { :url => {
                                            :controller => 'delegate_permissions',
                                            :action => 'destroy_permitted',
                                            :id => @dp.id,
                                            :project_id => @project.id,
                                            :principal_id => principal.id },
                                          :method => :post,
                                          :confirm => (!User.current.admin? && principal.id == User.current ? l(:text_own_membership_delete_confirmation) : nil)
                                        }, :title => l(:button_delete),
                                           :class => 'icon icon-del') %>
            </td>
          </tr>

        <% end %>
      <% end %>
    </tbody>
  </table>
<% else %>
  <p class="nodata"><%= l(:label_no_data) %></p>
<% end %>

